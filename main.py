import streamlit as st

st.set_page_config(page_title="MBTI 인사이트 가이드", page_icon="🧭", layout="centered")

MBTIS = [
    "INTJ","INTP","ENTJ","ENTP",
    "INFJ","INFP","ENFJ","ENFP",
    "ISTJ","ISFJ","ESTJ","ESFJ",
    "ISTP","ISFP","ESTP","ESFP"
]

DATA = {
    "INTJ": {
        "요약": "전략가형. 장기적 목표를 세우고 체계적으로 실행하는 데 강점.",
        "특징": [
            "논리적·분석적 사고, 독립적 몰입 선호",
            "비효율을 싫어하고 구조화·최적화에 관심",
            "깊은 주제에 대한 장기 프로젝트에 강함"
        ],
        "추천직업": [
            "데이터 분석/과학, 전략기획, 연구직, 제품 매니저",
            "소프트웨어 엔지니어, 투자/컨설팅, 정책 분석"
        ],
        "관계팁": [
            "직설적 피드백 시 상대의 감정 고려하기",
            "아이디어 공유 전에 맥락과 목적을 짧게 설명",
            "가끔은 ‘완벽’보다 ‘공유’를 우선"
        ],
        "공부팁": [
            "장기 로드맵(연-월-주) → 역산 계획",
            "심화·원리 위주 학습 + 주 1회 개념 리팩터링",
            "포모도로로 과몰입 시간 관리(깊게-짧게-반복)"
        ]
    },
    "INTP": {
        "요약": "사고형 사색가. 개념화·모델링에 강하고 호기심이 많음.",
        "특징": [
            "원리 탐구, 문제 구조화, 가설 세우기 즐김",
            "루틴·반복 과제보다 새로운 문제 선호"
        ],
        "추천직업": [
            "연구/개발, 알고리즘/백엔드, 아키텍처 설계",
            "테크니컬 라이터, 특허/기술분석"
        ],
        "관계팁": [
            "생각을 말로 ‘초안처럼’ 자주 공유하기",
            "대화에서 결론·다음 단계 명확히"
        ],
        "공부팁": [
            "개념 지도를 그려 상호 연결",
            "틀린 문제는 ‘왜 틀렸는가’ 원인 분해",
            "마감 전 체크리스트로 실행 강제"
        ]
    },
    "ENTJ": {
        "요약": "지휘관형. 목표 지향, 조직·리더십 강점.",
        "특징": ["의사결정 빠름, 성과·효율 중시", "큰 그림과 실행 플랜을 동시에 다룸"],
        "추천직업": ["사업/창업, 전략/컨설팅, 제품/프로젝트 매니지먼트", "세일즈 리더, 운영/조직관리"],
        "관계팁": ["성과대화 전 공감·경청 1분 확보", "역할/기대치를 명확히 문서화"],
        "공부팁": ["성과 지표(KPI) 설정, 주간 리뷰", "스터디 리드하면서 지식 정착"]
    },
    "ENTP": {
        "요약": "변론가형. 아이디어 생성·문제 재정의에 강함.",
        "특징": ["새로움 선호, 다각도 토론 즐김", "권태를 느끼면 동기 급감"],
        "추천직업": ["제품 기획, 그로스/마케팅, 창업, 컨설팅", "UX 리서치, 미디어/콘텐츠 기획"],
        "관계팁": ["반박 전에 공감/요약으로 신뢰 형성", "아이디어는 실험 계획과 함께 제안"],
        "공부팁": ["짧은 스프린트 과제, 실험·퀴즈화", "보상/챌린지로 흥미 유지"]
    },
    "INFJ": {
        "요약": "옹호자형. 가치지향, 통찰과 공감의 조합.",
        "특징": ["의미·가치가 분명할 때 몰입 극대화", "소수 깊은 관계 선호"],
        "추천직업": ["상담/심리, 교육, 콘텐츠 기획, 비영리/정책", "브랜드/스토리 전략"],
        "관계팁": ["의도·가치 공유로 협업 신뢰 구축", "경계 설정으로 과소모 방지"],
        "공부팁": ["목표를 가치와 연결, 저강도 꾸준함", "리플렉션 저널로 통찰 축적"]
    },
    "INFP": {
        "요약": "중재자형. 창의적·가치 중심, 몰입 시 폭발력.",
        "특징": ["자율성·의미가 중요", "감정 에너지 영향 큼"],
        "추천직업": ["콘텐츠/문학/디자인, 심리/상담, 사회복지", "브랜드 스토리/마케팅"],
        "관계팁": ["감정-사실 분리해서 표현 연습", "기한·기대 합의서를 미리 만들기"],
        "공부팁": ["작은 승리 루프(15~25분 단위)", "시각 보드·문장으로 동기 고정"]
    },
    "ENFJ": {
        "요약": "선도자형. 조정·동기부여에 강함.",
        "특징": ["사람과 비전 정렬을 잘함", "팀 학습 촉진"],
        "추천직업": ["교육/HR/코칭, 커뮤니케이션, 조직 개발", "브랜드/커뮤니티 매니지먼트"],
        "관계팁": ["배려-경계 균형, 자기시간 확보", "피드백은 구체-칭찬-개선 구조"],
        "공부팁": ["스터디 리드, 티칭 백으로 정착", "타임블럭으로 일정 보호"]
    },
    "ENFP": {
        "요약": "활동가형. 상상력·사람 중심, 추진력 높음.",
        "특징": ["새로움/자율성 선호, 다양성에 강함"],
        "추천직업": ["마케팅/브랜딩, 콘텐츠/기획, 창업, 교육/코칭"],
        "관계팁": ["과다 약속 줄이고 핵심 3개에 집중", "아이디어는 실행 파트너와 매칭"],
        "공부팁": ["테마 주간 운영, 보상/게임화", "마감 전 공개 약속으로 동기 유지"]
    },
    "ISTJ": {
        "요약": "현실주의자형. 책임감·정확성, 절차·규범 존중.",
        "특징": ["체크리스트 운영에 강함", "신뢰성과 꾸준함"],
        "추천직업": ["회계/행정/법무, 운영/품질, 데이터 관리", "공공/안전/감사"],
        "관계팁": ["변경 시 근거와 일정 명확화", "일관된 약속 관리"],
        "공부팁": ["표준 루틴, 오답 데이터베이스", "주간 리포트로 누적 관리"]
    },
    "ISFJ": {
        "요약": "수호자형. 성실·세심, 지원형 팀 플레이어.",
        "특징": ["세부·케어에 강점", "조용한 헌신"],
        "추천직업": ["간호/보건/교육 지원, 운영/CS, 기록 관리", "행정/복지"],
        "관계팁": ["요청 거절의 기준 만들기", "감정 과소비 주의"],
        "공부팁": ["안정 루틴, 누적형 암기법", "작은 칭찬·보상으로 유지"]
    },
    "ESTJ": {
        "요약": "경영자형. 구조화·실행력, 규율 중시.",
        "특징": ["역할·프로세스 정립", "목표-지표-점검 선호"],
        "추천직업": ["운영/총무/관리, 프로젝트 매니징, 세일즈 리드", "공공조직 리더십"],
        "관계팁": ["규칙 앞서 공감 1문장", "의견 충돌은 데이터로 정리"],
        "공부팁": ["계획-실행-점검 사이클, 주간 KPI", "짝 공부로 상호 점검"]
    },
    "ESFJ": {
        "요약": "집정관형. 협력·배려, 조직 내 조화 중시.",
        "특징": ["사람 중심 실무 강함", "관계와 실행 균형"],
        "추천직업": ["교육/행정/CS, HR/조직문화, 행사/운영", "보건/복지"],
        "관계팁": ["자기 돌봄 시간 예약", "경계 존중 메시지 연습"],
        "공부팁": ["스터디 운영·요약 공유", "체크리스트/달력 관리"]
    },
    "ISTP": {
        "요약": "장인형. 문제 해결 실전형, 손으로 다루는 일 선호.",
        "특징": ["도구/시스템 최적화", "빠른 트러블슈팅"],
        "추천직업": ["엔지니어링/정비, 보안/네트워크, 데이터 파이프라인", "프로토타이핑"],
        "관계팁": ["침묵은 무관심이 아님을 표현", "선택지 제시형 커뮤니케이션"],
        "공부팁": ["실습·프로젝트 베이스", "문제은행 속도+정확도 훈련"]
    },
    "ISFP": {
        "요약": "모험가형. 미적 감수성, 조용한 실천가.",
        "특징": ["자율·유연 선호", "감각적 디테일 강점"],
        "추천직업": ["디자인/영상/사진, 공간/제품 디자인", "보건/치료·케어"],
        "관계팁": ["감정·요구를 부드럽게 언어화", "과도한 일정 압박 피하기"],
        "공부팁": ["비주얼 노트, 예시 중심", "짧은 몰입 블록 + 산책 회복"]
    },
    "ESTP": {
        "요약": "사업가형. 실행력·상황대응, 현장감각.",
        "특징": ["즉각 문제 해결, 모험·경쟁 즐김"],
        "추천직업": ["세일즈/영업, 이벤트/스포츠, 위기관리/보안", "그로스/퍼포먼스"],
        "관계팁": ["승부욕을 협업 목표로 전환", "피드백은 짧고 명확하게"],
        "공부팁": ["타이머로 레이스처럼, 점수화 시스템", "실전 모의 반복"]
    },
    "ESFP": {
        "요약": "연예인형. 사교적·현장 에너지, 즐거움 확산.",
        "특징": ["즉각 피드백 선호, 팀 사기 진작"],
        "추천직업": ["이벤트/홍보/방송, 퍼포먼스/세일즈, 서비스 기획", "콘텐츠 크리에이터"],
        "관계팁": ["즉흥 약속은 핵심에 집중", "피곤 신호 오면 회복 루틴"],
        "공부팁": ["게임화·보상, 스터디로 분위기 리드", "숏 세션 다회 반복"]
    }
}

def get_mbti_result(mbti: str):
    key = mbti.upper()
    if key not in DATA:
        return None
    return DATA[key]

def main():
    st.title("MBTI 인사이트 가이드 🧭")
    st.caption("MBTI 유형별 특징, 추천 직업, 인간관계 팁, 공부 전략을 한눈에")

    # 입력 영역
    col1, col2 = st.columns([2,1])
    with col1:
        mbti = st.selectbox("당신의 MBTI를 선택하세요", MBTIS, index=MBTIS.index("INTJ"))
    with col2:
        show_all = st.checkbox("모든 항목 펼쳐보기", value=True)

    result = get_mbti_result(mbti)

    if not result:
        st.warning("유효한 MBTI를 선택해주세요.")
        return

    st.subheader(f"{mbti} 요약")
    st.write(result["요약"])

    # 탭 UI
    tabs = st.tabs(["특징", "추천 직업", "인간관계 팁", "공부/시간관리"])
    with tabs[0]:
        if show_all:
            for t in result["특징"]:
                st.write(f"- {t}")
        else:
            st.write("• " + " / ".join(result["특징"][:3]))
    with tabs[1]:
        for job in result["추천직업"]:
            st.write(f"- {job}")
        st.info("참고: 직업 선택은 개인의 경험·역량·가치에 따라 달라질 수 있어요.")
    with tabs[2]:
        for tip in result["관계팁"]:
            st.write(f"- {tip}")
    with tabs[3]:
        for tip in result["공부팁"]:
            st.write(f"- {tip}")
        st.caption("개인차가 있으니 자신에게 맞게 조정해보세요.")

    # 추가: 타입 비교 기능
    st.divider()
    st.subheader("유형 비교")
    c1, c2 = st.columns(2)
    with c1:
        a = st.selectbox("유형 A", MBTIS, index=MBTIS.index("INTP"), key="A")
    with c2:
        b = st.selectbox("유형 B", MBTIS, index=MBTIS.index("ENTP"), key="B")
    if st.button("비교하기"):
        ra, rb = DATA[a], DATA[b]
        st.write(f"- {a} 핵심: {ra['요약']}")
        st.write(f"- {b} 핵심: {rb['요약']}")
        st.write("공통점: 논리/아이디어 지향(정도 차이 있음). 차이: A는 구조·내면 탐구, B는 상호작용·실험을 선호.")

if __name__ == "__main__":
    main()
